import PyMKF

# material_data = PyMKF.find_core_material_by_name("3C97")
# print(material_data)


# coil = {'bobbin': {'processedDescription': {'columnDepth': 0.008725, 'columnShape': 'rectangular', 'columnThickness': 0.001225, 'wallThickness': 0.0011680000000000006, 'windingWindows': [{'area': 3.34616e-05, 'coordinates': [0.005363, 0.0, 0.0], 'height': 0.008863999999999999, 'shape': 'rectangular', 'width': 0.003775}], 'columnWidth': 0.0034755, 'coordinates': [0.0, 0.0, 0.0]}}, 'functionalDescription': [{'isolationSide': 'primary', 'name': 'Primary', 'numberParallels': 1, 'numberTurns': 14, 'wire': 'Round 1.00 - Grade 1'}]}
# print(coil)

# result = PyMKF.wind(coil, 1, [], [], [])
# print(result)
operating_point = {'name': 'Operating Point No. 1', 'conditions': {'ambientTemperature': 42}, 'excitationsPerWinding': [{'name': 'Primary winding excitation', 'frequency': 100000, 'current': {'waveform': {'data': [-5, 5, -5], 'time': [0, 5e-06, 1e-05]}, 'processed': {'dutyCycle': 0.5, 'peakToPeak': 10, 'offset': 0, 'label': 'Triangular'}}, 'voltage': {'waveform': {'data': [-20.5, 70.5, 70.5, -20.5, -20.5], 'time': [0, 0, 5e-06, 5e-06, 1e-05]}, 'processed': {'dutyCycle': 0.5, 'peakToPeak': 100, 'offset': 0, 'label': 'Rectangular'}}}]}
magnetic = {'coil': {'bobbin': {'distributorsInfo': None, 'functionalDescription': None, 'manufacturerInfo': None, 'name': None, 'processedDescription': {'columnDepth': 0.0015375000000000002, 'columnShape': 'round', 'columnThickness': 0.0006750000000000003, 'columnWidth': 0.0015375000000000002, 'coordinates': [0, 0, 0], 'pins': None, 'wallThickness': 0.0006328382137062499, 'windingWindows': [{'angle': None, 'area': 2.115668411496562e-06, 'coordinates': [0.0018750000000000001, 0, 0], 'height': 0.0031343235725874996, 'radialHeight': None, 'sectionsAlignment': 'inner or top', 'sectionsOrientation': 'overlapping', 'shape': 'rectangular', 'width': 0.0006749999999999998}]}}, 'functionalDescription': [{'connections': None, 'isolationSide': 'primary', 'name': 'Primary', 'numberParallels': 1, 'numberTurns': 10, 'wire': {'coating': {'breakdownVoltage': 4500, 'grade': None, 'material': 'ETFE', 'numberLayers': 3, 'temperatureRating': 155, 'thickness': None, 'thicknessLayers': 2.54e-05, 'type': 'insulated'}, 'conductingArea': None, 'conductingDiameter': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': None, 'minimum': None, 'nominal': 0.00224}, 'conductingHeight': None, 'conductingWidth': None, 'edgeRadius': None, 'manufacturerInfo': None, 'material': 'copper', 'name': 'Round 2.24 - Grade 1', 'numberConductors': 1, 'outerDiameter': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': None, 'minimum': None, 'nominal': 0.002316}, 'outerHeight': None, 'outerWidth': None, 'standard': 'IEC 60317', 'standardName': '2.24 mm', 'strand': None, 'type': 'round'}}], 'layersDescription': [{'additionalCoordinates': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.0026955000000000017, 0], 'dimensions': [0.002316, 0.002316], 'fillingFactor': 0.738915413920732, 'insulationMaterial': None, 'name': 'Primary section 0 layer 0', 'orientation': 'overlapping', 'partialWindings': [{'connections': None, 'parallelsProportion': [0.1], 'winding': 'Primary'}], 'section': 'Primary section 0', 'turnsAlignment': 'spread', 'type': 'conduction', 'windingStyle': 'windByConsecutiveTurns'}, {'additionalCoordinates': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.005011500000000002, 0], 'dimensions': [0.002316, 0.002316], 'fillingFactor': 0.738915413920732, 'insulationMaterial': None, 'name': 'Primary section 0 layer 1', 'orientation': 'overlapping', 'partialWindings': [{'connections': None, 'parallelsProportion': [0.1], 'winding': 'Primary'}], 'section': 'Primary section 0', 'turnsAlignment': 'spread', 'type': 'conduction', 'windingStyle': 'windByConsecutiveTurns'}, {'additionalCoordinates': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.0073275000000000015, 0], 'dimensions': [0.002316, 0.002316], 'fillingFactor': 0.738915413920732, 'insulationMaterial': None, 'name': 'Primary section 0 layer 2', 'orientation': 'overlapping', 'partialWindings': [{'connections': None, 'parallelsProportion': [0.1], 'winding': 'Primary'}], 'section': 'Primary section 0', 'turnsAlignment': 'spread', 'type': 'conduction', 'windingStyle': 'windByConsecutiveTurns'}, {'additionalCoordinates': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.009643500000000001, 0], 'dimensions': [0.002316, 0.002316], 'fillingFactor': 0.738915413920732, 'insulationMaterial': None, 'name': 'Primary section 0 layer 3', 'orientation': 'overlapping', 'partialWindings': [{'connections': None, 'parallelsProportion': [0.1], 'winding': 'Primary'}], 'section': 'Primary section 0', 'turnsAlignment': 'spread', 'type': 'conduction', 'windingStyle': 'windByConsecutiveTurns'}, {'additionalCoordinates': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.011959500000000001, 0], 'dimensions': [0.002316, 0.002316], 'fillingFactor': 0.738915413920732, 'insulationMaterial': None, 'name': 'Primary section 0 layer 4', 'orientation': 'overlapping', 'partialWindings': [{'connections': None, 'parallelsProportion': [0.1], 'winding': 'Primary'}], 'section': 'Primary section 0', 'turnsAlignment': 'spread', 'type': 'conduction', 'windingStyle': 'windByConsecutiveTurns'}, {'additionalCoordinates': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.014275500000000002, 0], 'dimensions': [0.002316, 0.002316], 'fillingFactor': 0.738915413920732, 'insulationMaterial': None, 'name': 'Primary section 0 layer 5', 'orientation': 'overlapping', 'partialWindings': [{'connections': None, 'parallelsProportion': [0.1], 'winding': 'Primary'}], 'section': 'Primary section 0', 'turnsAlignment': 'spread', 'type': 'conduction', 'windingStyle': 'windByConsecutiveTurns'}, {'additionalCoordinates': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.016591500000000002, 0], 'dimensions': [0.002316, 0.002316], 'fillingFactor': 0.738915413920732, 'insulationMaterial': None, 'name': 'Primary section 0 layer 6', 'orientation': 'overlapping', 'partialWindings': [{'connections': None, 'parallelsProportion': [0.1], 'winding': 'Primary'}], 'section': 'Primary section 0', 'turnsAlignment': 'spread', 'type': 'conduction', 'windingStyle': 'windByConsecutiveTurns'}, {'additionalCoordinates': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.0189075, 0], 'dimensions': [0.002316, 0.002316], 'fillingFactor': 0.738915413920732, 'insulationMaterial': None, 'name': 'Primary section 0 layer 7', 'orientation': 'overlapping', 'partialWindings': [{'connections': None, 'parallelsProportion': [0.1], 'winding': 'Primary'}], 'section': 'Primary section 0', 'turnsAlignment': 'spread', 'type': 'conduction', 'windingStyle': 'windByConsecutiveTurns'}, {'additionalCoordinates': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.0212235, 0], 'dimensions': [0.002316, 0.002316], 'fillingFactor': 0.738915413920732, 'insulationMaterial': None, 'name': 'Primary section 0 layer 8', 'orientation': 'overlapping', 'partialWindings': [{'connections': None, 'parallelsProportion': [0.1], 'winding': 'Primary'}], 'section': 'Primary section 0', 'turnsAlignment': 'spread', 'type': 'conduction', 'windingStyle': 'windByConsecutiveTurns'}, {'additionalCoordinates': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.023539500000000005, 0], 'dimensions': [0.002316, 0.002316], 'fillingFactor': 0.738915413920732, 'insulationMaterial': None, 'name': 'Primary section 0 layer 9', 'orientation': 'overlapping', 'partialWindings': [{'connections': None, 'parallelsProportion': [0.1], 'winding': 'Primary'}], 'section': 'Primary section 0', 'turnsAlignment': 'spread', 'type': 'conduction', 'windingStyle': 'windByConsecutiveTurns'}], 'sectionsDescription': [{'coordinateSystem': 'cartesian', 'coordinates': [0.0131175, 0], 'dimensions': [0.02316, 0.002316], 'fillingFactor': 25.35300886874689, 'layersAlignment': None, 'layersOrientation': 'overlapping', 'margin': [0, 0], 'name': 'Primary section 0', 'partialWindings': [{'connections': None, 'parallelsProportion': [1], 'winding': 'Primary'}], 'type': 'conduction', 'windingStyle': 'windByConsecutiveTurns'}], 'turnsDescription': [{'additionalCoordinates': None, 'angle': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.0026955000000000017, 0], 'dimensions': [0.002316, 0.002316], 'layer': 'Primary section 0 layer 0', 'length': 0.016936325995502585, 'name': 'Primary parallel 0 turn 0', 'orientation': 'clockwise', 'parallel': 0, 'rotation': 0, 'section': 'Primary section 0', 'winding': 'Primary'}, {'additionalCoordinates': None, 'angle': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.005011500000000002, 0], 'dimensions': [0.002316, 0.002316], 'layer': 'Primary section 0 layer 1', 'length': 0.03148818316693051, 'name': 'Primary parallel 0 turn 1', 'orientation': 'clockwise', 'parallel': 0, 'rotation': 0, 'section': 'Primary section 0', 'winding': 'Primary'}, {'additionalCoordinates': None, 'angle': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.0073275000000000015, 0], 'dimensions': [0.002316, 0.002316], 'layer': 'Primary section 0 layer 2', 'length': 0.04604004033835843, 'name': 'Primary parallel 0 turn 2', 'orientation': 'clockwise', 'parallel': 0, 'rotation': 0, 'section': 'Primary section 0', 'winding': 'Primary'}, {'additionalCoordinates': None, 'angle': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.009643500000000001, 0], 'dimensions': [0.002316, 0.002316], 'layer': 'Primary section 0 layer 3', 'length': 0.060591897509786344, 'name': 'Primary parallel 0 turn 3', 'orientation': 'clockwise', 'parallel': 0, 'rotation': 0, 'section': 'Primary section 0', 'winding': 'Primary'}, {'additionalCoordinates': None, 'angle': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.011959500000000001, 0], 'dimensions': [0.002316, 0.002316], 'layer': 'Primary section 0 layer 4', 'length': 0.07514375468121427, 'name': 'Primary parallel 0 turn 4', 'orientation': 'clockwise', 'parallel': 0, 'rotation': 0, 'section': 'Primary section 0', 'winding': 'Primary'}, {'additionalCoordinates': None, 'angle': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.014275500000000002, 0], 'dimensions': [0.002316, 0.002316], 'layer': 'Primary section 0 layer 5', 'length': 0.08969561185264219, 'name': 'Primary parallel 0 turn 5', 'orientation': 'clockwise', 'parallel': 0, 'rotation': 0, 'section': 'Primary section 0', 'winding': 'Primary'}, {'additionalCoordinates': None, 'angle': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.016591500000000002, 0], 'dimensions': [0.002316, 0.002316], 'layer': 'Primary section 0 layer 6', 'length': 0.10424746902407012, 'name': 'Primary parallel 0 turn 6', 'orientation': 'clockwise', 'parallel': 0, 'rotation': 0, 'section': 'Primary section 0', 'winding': 'Primary'}, {'additionalCoordinates': None, 'angle': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.0189075, 0], 'dimensions': [0.002316, 0.002316], 'layer': 'Primary section 0 layer 7', 'length': 0.11879932619549803, 'name': 'Primary parallel 0 turn 7', 'orientation': 'clockwise', 'parallel': 0, 'rotation': 0, 'section': 'Primary section 0', 'winding': 'Primary'}, {'additionalCoordinates': None, 'angle': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.0212235, 0], 'dimensions': [0.002316, 0.002316], 'layer': 'Primary section 0 layer 8', 'length': 0.13335118336692595, 'name': 'Primary parallel 0 turn 8', 'orientation': 'clockwise', 'parallel': 0, 'rotation': 0, 'section': 'Primary section 0', 'winding': 'Primary'}, {'additionalCoordinates': None, 'angle': None, 'coordinateSystem': 'cartesian', 'coordinates': [0.023539500000000005, 0], 'dimensions': [0.002316, 0.002316], 'layer': 'Primary section 0 layer 9', 'length': 0.1479030405383539, 'name': 'Primary parallel 0 turn 9', 'orientation': 'clockwise', 'parallel': 0, 'rotation': 0, 'section': 'Primary section 0', 'winding': 'Primary'}]}, 'core': {'distributorsInfo': None, 'functionalDescription': {'coating': None, 'gapping': [{'area': 3e-06, 'coordinates': [0, 0, 0], 'distanceClosestNormalSurface': 0.0021975000000000002, 'distanceClosestParallelSurface': 0.00135, 'length': 5e-06, 'sectionDimensions': [0.001725, 0.001725], 'shape': 'round', 'type': 'residual'}, {'area': 1.9e-05, 'coordinates': [0, 0, -0.002545], 'distanceClosestNormalSurface': 0.0021975000000000002, 'distanceClosestParallelSurface': 0.00135, 'length': 5e-06, 'sectionDimensions': [0.028658, 0.000663], 'shape': 'irregular', 'type': 'residual'}], 'material': '44', 'numberStacks': 1, 'shape': {'aliases': [], 'dimensions': {'A': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.00615, 'minimum': 0.00585, 'nominal': None}, 'B': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.00305, 'minimum': 0.00295, 'nominal': None}, 'C': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.0039, 'minimum': 0.00365, 'nominal': None}, 'D': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.0023, 'minimum': 0.0021, 'nominal': None}, 'E': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.00455, 'minimum': 0.0043, 'nominal': None}, 'F': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.0018, 'minimum': 0.00165, 'nominal': None}, 'K': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.0009, 'minimum': None, 'nominal': None}}, 'family': 'ep', 'familySubtype': None, 'magneticCircuit': 'open', 'name': 'EP 6', 'type': 'standard'}, 'type': 'two-piece set'}, 'geometricalDescription': [{'coordinates': [0, 0, 0], 'dimensions': None, 'insulationMaterial': None, 'machining': None, 'material': '44', 'rotation': [3.141592653589793, 3.141592653589793, 0], 'shape': {'aliases': [], 'dimensions': {'A': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.00615, 'minimum': 0.00585, 'nominal': None}, 'B': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.00305, 'minimum': 0.00295, 'nominal': None}, 'C': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.0039, 'minimum': 0.00365, 'nominal': None}, 'D': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.0023, 'minimum': 0.0021, 'nominal': None}, 'E': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.00455, 'minimum': 0.0043, 'nominal': None}, 'F': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.0018, 'minimum': 0.00165, 'nominal': None}, 'K': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.0009, 'minimum': None, 'nominal': None}}, 'family': 'ep', 'familySubtype': None, 'magneticCircuit': 'open', 'name': 'EP 6', 'type': 'standard'}, 'type': 'half set'}, {'coordinates': [0, 0, 0], 'dimensions': None, 'insulationMaterial': None, 'machining': None, 'material': '44', 'rotation': [0, 0, 0], 'shape': {'aliases': [], 'dimensions': {'A': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.00615, 'minimum': 0.00585, 'nominal': None}, 'B': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.00305, 'minimum': 0.00295, 'nominal': None}, 'C': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.0039, 'minimum': 0.00365, 'nominal': None}, 'D': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.0023, 'minimum': 0.0021, 'nominal': None}, 'E': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.00455, 'minimum': 0.0043, 'nominal': None}, 'F': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.0018, 'minimum': 0.00165, 'nominal': None}, 'K': {'excludeMaximum': None, 'excludeMinimum': None, 'maximum': 0.0009, 'minimum': None, 'nominal': None}}, 'family': 'ep', 'familySubtype': None, 'magneticCircuit': 'open', 'name': 'EP 6', 'type': 'standard'}, 'type': 'half set'}], 'manufacturerInfo': None, 'name': 'Custom', 'processedDescription': {'columns': [{'area': 3e-06, 'coordinates': [0, 0, 0], 'depth': 0.001725, 'height': 0.0044, 'minimumDepth': None, 'minimumWidth': None, 'shape': 'round', 'type': 'central', 'width': 0.001725}, {'area': 1.9e-05, 'coordinates': [0, 0, -0.002545], 'depth': 0.000663, 'height': 0.0044, 'minimumDepth': None, 'minimumWidth': 0.000788, 'shape': 'irregular', 'type': 'lateral', 'width': 0.028658}], 'depth': 0.0037749999999999997, 'effectiveParameters': {'effectiveArea': 3.148296314833282e-06, 'effectiveLength': 0.010354750378339139, 'effectiveVolume': 3.2599822457143645e-08, 'minimumArea': 2.401737909959532e-06}, 'height': 0.006, 'width': 0.006, 'windingWindows': [{'angle': None, 'area': 5.94e-06, 'coordinates': [0.0008625, 0], 'height': 0.004399999999999999, 'radialHeight': None, 'sectionsAlignment': None, 'sectionsOrientation': None, 'shape': None, 'width': 0.00135}]}}, 'manufacturerInfo': {'name': 'OpenMagnetics', 'reference': 'My custom magnetic'}}
result = PyMKF.plot_field(magnetic, operating_point, "/opt/openmagnetics/temp/mierda.svg")
print(result)
